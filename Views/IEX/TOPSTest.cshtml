@{
    ViewData["Title"] = "TOPS Test";
}
@using System;
@using System.Linq;
@using System.Diagnostics;
@using System.Threading.Tasks;
@using Microsoft.AspNetCore.Mvc;
@using Microsoft.AspNetCore.Http;
@using System.Collections.Generic;
@using Microsoft.EntityFrameworkCore;
@using Microsoft.AspNetCore.Identity;
@using System.Net;
@using System.IO;
@using Newtonsoft.Json;
<meta http-equiv="refresh" content="2">
<div class="text-center">
    <h1 class="display-4">TOPS Test</h1>
</div>
<br>
<div class="grid-container">
@{
    int counter = 1;
    int scounter = 0;
}

@foreach(var Stock in ViewBag.TOPS)
{
    <div class="grid-item">
    <p>Symbol: @Stock.symbol</p>
    <!-- @if(Context.Session.GetInt32("@counter") == null)
    {
        Console.WriteLine("HELLO HELLO");
        Context.Session.SetInt32("@counter", (int)@Stock.bidPrice);
    }
    Console.WriteLine("Counter = " + counter + ". Comparing: Sessiong: " + Context.Session.GetInt32("@counter") + ". Bid Price: " + @Stock.bidPrice):
    @if(Context.Session.GetInt32("@counter") > @Stock.bidPrice)
    {
        
        // RED
        Console.WriteLine("RED: " + counter + " Old Price:" + Context.Session.GetInt32("@counter") + " New Price: " + @Stock.bidPrice);

        Context.Session.SetInt32("@counter", (int)@Stock.bidPrice);
        Console.WriteLine("RED: " + counter + " Old Price:" + Context.Session.GetInt32("@counter") + " New Price: " + @Stock.bidPrice);
        <p>Bid Price: <span class="Red">@Stock.bidPrice</span></p>
    }
    else
    {
        
        //green
        Console.WriteLine("Green: " + counter + " Old Price:" + Context.Session.GetInt32("@counter") + " New Price: " + @Stock.bidPrice);
        Context.Session.SetInt32("@counter", (int)@Stock.bidPrice);
        Console.WriteLine("Green: " + counter + " Old Price:" + Context.Session.GetInt32("@counter") + " New Price: " + @Stock.bidPrice);
        <p>Bid Price: <span class="Green">@Stock.bidPrice</span></p>
    } -->

    
    
    
    <p class="AskPrice">Ask Price: @Stock.askPrice</p>
    <p>Last Updated: @Time.FromUnixTime(Stock.lastUpdated)</p>
    <p>Market Percent: @Stock.marketPercent</p>
    </div>
    Console.WriteLine("Counter Added 1: " + counter);
    counter++;
    
    
}
</div>